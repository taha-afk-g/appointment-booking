<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Healthy Haven Patient Form</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: url('logo.png') no-repeat center center fixed;
      background-size: cover;
      color: #333;
      line-height: 1.5;
      transition: background 1s ease-in-out;
    }
    
    .background-opacity {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.1);
      z-index: -1;
    }
    header {
      background: rgba(255, 255, 255, 0.652);
      color: #000000;
      padding: 20px;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
      font-size: larger;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo {
      width: 100px; /* Adjust the size of your logo as needed */
      margin-right: 10px; /* Space between the logo and the title */
    }

    main {
      padding: 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 10px;
      max-width: 800px;
      margin: 20px auto;
    }
    /* Style radio buttons and checkboxes */
    input[type="radio"],
    input[type="checkbox"] {
      appearance: none;
      width: 20px; /* Increase size for better visibility */
      height: 20px;
      border: 2px solid #0ab6bc;
      border-radius: 50%;
      display: inline-block;
      position: relative;
      cursor: pointer;
      margin: 0; /* Remove unwanted margin */
      flex-shrink: 0; /* Prevent shrinking in flexbox */
    }

    /* Square checkboxes */
    input[type="checkbox"] {
      border-radius: 4px;
    }

    /* When checked, apply styles */
    input[type="radio"]:checked,
    input[type="checkbox"]:checked {
      background-color: #0ab6bc;
      border: 2px solid #008685;
    }

    /* Inner dot for radio buttons */
    input[type="radio"]:checked::before {
      content: "";
      width: 10px;
      height: 10px;
      background-color: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* Checkmark for checkboxes */
    input[type="checkbox"]:checked::before {
      content: "âœ”";
      color: white;
      font-size: 14px;
      font-weight: bold;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* ðŸ’¯ Perfectly align label text with input */
    label {
      display: flex;
      align-items: center; /* Ensures vertical alignment */
      font-size: 1.1em;
      cursor: pointer;
      gap: 10px; /* Adds spacing between input and text */
      margin-bottom: 10px;
      line-height: 1.5; /* Ensures perfect alignment */
    }


    /* Responsive adjustments */
    @media (max-width: 600px) {
      input[type="radio"],
      input[type="checkbox"] {
        width: 16px;
        height: 16px;
      }

      input[type="radio"]:checked::before {
        width: 8px;
        height: 8px;
      }
    }

    input, textarea, select, button {
      width: 100%;
      padding: 12px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
      box-sizing: border-box;
    }
    button {
      background: #0ab6bc;
      color: white;
      border: none;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #008685;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }

    /* Style the language selector */
    #languageSelector {
      padding: 5px 10px;
      font-size: 0.9em; /* Make it smaller */
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #fff;
      cursor: pointer;
      width: 20%;
    }

    /* Ensure it doesn't break on smaller screens */
    @media (max-width: 600px) {
      #languageSelector {
        font-size: 0.8em;
        padding: 3px 7px;
      }
    }

  </style>
</head>
<body>
  <div class="background-opacity"></div>
  <header>
    <div class="header-content">
      <img src="logo.png" alt="Logo" class="logo">
      <h1 id="header">Patient Form</h1>
    </div>
  </header>

  

  <main>
    <form id="nutritionistForm" action="http://127.0.0.1:5000/submit" method="POST">
      <section>
        <div style="display: flex; align-items: center; justify-content: space-between;">
            <h2 id="personal_info">Personal Information</h2>
            <select id="languageSelector">
                <option value="en">English</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            </select>
        </div>
        <label for="name" id="nameLabel">Name:</label>
        <input type="text" id="name" name="name" required>

        <label id="phoneLabel" for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="Your Contact Number" required>
        <input type="hidden" id="fullPhone" name="fullPhone">
        <span id="error" style="color: red; display: none;">Please enter a valid phone number</span>

        
        <br>
        <label id="ageLabel" for="age">Age:</label>
        <input type="text" id="age" name="age" maxlength="3" required>
        <span id="error1" class="error"></span><br>

        <label id="weightLabel" for="weight">Weight (kg):</label>
        <input type="text" id="weight" name="weight" maxlength="3" required>
        <span id="error2" class="error"></span><br>

        <label id="heightLabel" for="height">Height (cm):</label>
        <input type="text" id="height" name="height" maxlength="3" required>
        <span id="error3" class="error"></span><br>

        <label for="sex" id ="genderLabel" >Gender</label>
          <label><input type="radio" name="sex" value="male" id="maleLabel"> Male</label><br>
          <label><input type="radio" name="sex" value="female" id="femaleLabel"> Female</label>
      </section>
      <section>
        <h2 id="goalHeader">Your Goal</h2>
        <label><input type="checkbox" name="goal[]" value="Lose Weight" id="loseWeight"> Lose Weight</label><br>
        <label><input type="checkbox" name="goal[]" value="Gain Weight" id="gainWeight"> Gain Weight</label><br>
        <label><input type="checkbox" name="goal[]" value="Maintain a Healthy Lifestyle" id="healthyLifestyle"> Maintain a Healthy Lifestyle</label><br>
        <label><input type="checkbox" name="goal[]" value="Manage a Medical Condition" id="medicalCondition"> Manage a Medical Condition</label><br>
      </section>
      

      <section>
        <h2 id="medicalInfoHeader">Medical Information</h2>
        <label><input type="checkbox" name="medical[]" value="Diabetes" id="diabetes"> Diabetes</label><br>
        <label><input type="checkbox" name="medical[]" value="Hypertension" id="hypertension"> Hypertension</label><br>
        <label><input type="checkbox" name="medical[]" value="Dyslipidemia" id="dyslipidemia"> Dyslipidemia</label><br>
        <label><input type="checkbox" name="medical[]" value="Heart Disease" id="heartDisease"> Heart Disease</label><br>
        <label for="medicalOtherInput" id="medicalOtherLabel">Other (Please specify):</label>
        <input type="text" name="medical_other" id="medicalOtherInput" placeholder="Specify if other">
        <h2 id="medicationsLabel"> Medications:</h2>
        <textarea id="medications" name="medications"></textarea>
        <label><input type="checkbox" name="medications_none" value="None" id="noneLabel"> None</label><br>
      </section>

      <section>
        <h2 id="lifestyleHeader">Lifestyle</h2>
      
        <label><input type="radio" name="activity" value="Not Active" id="notActive"> Not Active</label><br>
        <label><input type="radio" name="activity" value="Moderately Active" id="moderateActive"> Moderately Active</label><br>
        <label><input type="radio" name="activity" value="Highly Active" id="highlyActive"> Highly Active</label><br>
        
        <h2 id="sleepLabel">Sleep Duration:</h2>
        <label><input type="radio" name="sleep" value="Less than 6-8hrs" id="lessSleep"> Less than 6-8 hours</label><br>
        <label><input type="radio" name="sleep" value="More than 6-8 hours" id="moreSleep"> More than 6-8 hours</label><br>
      
        <h2 for="water" id="waterLabel">Water Intake (Liters per day):</h2>
        <label><input type="radio" name="water" value="0.5L" id="zeroPointFiveL"> 0.5 liters</label><br>
        <label><input type="radio" name="water" value="1L" id="oneL"> 1 liters</label><br>
        <label><input type="radio" name="water" value="1.5L" id="onePointFiveL"> 1.5 liters</label><br>
        <label><input type="radio" name="water" value="2L" id="twoL"> 2 liters</label><br>
        <label><input type="radio" name="water" value="2.5L" id="twoPointFiveL"> 2.5 liters</label><br>
        <label><input type="radio" name="water" value="3L" id="threeL"> 3 liters</label><br>
        <label><input type="radio" name="water" value="More than 3L" id="moreThanThreeL"> More than 3 liters</label><br>
      
        <h2 for="exercise" id="exerciseLabel">Exercise Frequency:</h2>
        <label><input type="radio" name="exercise" value="Daily" id="daily"> Daily</label><br>
        <label><input type="radio" name="exercise" value="A few times a week" id="fewTimesWeek"> A few times a week</label><br>
        <label><input type="radio" name="exercise" value="Rarely" id="rarely"> Rarely</label><br>
        <label><input type="radio" name="exercise" value="Never" id="never"> Never</label><br>
    </section>

      <section>
        <h2 id="dietHeader">Diet and Emotional Eating</h2>
        <label id="dietExperienceLabel">Have you been on any type of diet before?</label>
        <textarea id="diet_experience" name="diet_experience" rows="3" placeholder="Describe your past diet experiences..."></textarea>

        <h3 id="emotionalEatingHeader">Do you lose control around food when youâ€™re:</h3>
        <table>
          <tr>
            <th id="emotionHeader">Emotion</th>
            <th id="yesHeader">Yes</th>
            <th id="noHeader">No</th>
          </tr>
          <tr>
            <td id="happyLabel">ðŸ˜Š Happy</td>
            <td><input type="radio" name="happy" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="happy" value="no" id="noHeader"></td>
          </tr>
          <tr>
            <td id="sadLabel">ðŸ˜¢ Sad</td>
            <td><input type="radio" name="sad" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="sad" value="no" id="noHeader"></td>
          </tr>
          <tr>
            <td id="excitedLabel">ðŸ¤© Excited</td>
            <td><input type="radio" name="excited" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="excited" value="no" id="noHeader"></td>
          </tr>
          <tr>
            <td id="angryLabel">ðŸ˜¡ Angry</td>
            <td><input type="radio" name="angry" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="angry" value="no" id="noHeader"></td>
          </tr>
          <tr>
            <td id="anxiousLabel">ðŸ˜Ÿ Anxious</td>
            <td><input type="radio" name="anxious" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="anxious" value="no" id="noHeader"></td>
          </tr>
          <tr>
            <td id="boredLabel">ðŸ˜‘ Bored</td>
            <td><input type="radio" name="bored" value="yes" id="yesHeader"></td>
            <td><input type="radio" name="bored" value="no" id="noHeader"></td>
          </tr>
        </table>
      </section>
      
      <section>
        <h2 id="additionalInfoHeader">Additional Information</h2>
        <label for="additional_notes" id="additionalNotesLabel">Additional Notes:</label>
        <textarea id="additional_notes" name="additional_notes" rows="3" placeholder="Any additional notes..." id="additionalNotesPlaceholder"></textarea>
      </section>

      <button id="submitBtn" type="submit">Submit</button>
    </form>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script>
async function loadLanguage(lang) {
  try {
    const response = await fetch('translations.json');
    const translations = await response.json();


    if (!translations[lang]) {
          console.error(`Translations for language "${lang}" not found.`);
          return;
        }
    document.title = translations[lang]?.title || "Healthy Haven Patient Form";

    // Define all elements to translate
    const elements = {
      header: "header",
      personal_info: "personal_info",
      nameLabel: "nameLabel",
      phoneLabel: "phoneLabel",
      ageLabel: "ageLabel",
      weightLabel: "weightLabel",
      heightLabel: "heightLabel",
      genderLabel: "genderLabel",
      selectLabel: "selectLabel",
      maleLabel: "maleLabel",
      femaleLabel: "femaleLabel",
      goalHeader: "goalHeader",
      loseWeight: "loseWeight",
      gainWeight: "gainWeight",
      healthyLifestyle: "healthyLifestyle",
      medicalCondition: "medicalCondition",
      medicalInfoHeader: "medicalInfoHeader",
      diabetes: "diabetes",
      hypertension: "hypertension",
      dyslipidemia: "dyslipidemia",
      heartDisease: "heartDisease",
      medicalOther:"Other",
      medicalOtherPlaceholder: "Specify if other",
      medicationsLabel: "medicationsLabel",
      noneLabel: "noneLabel",
      lifestyleHeader: "lifestyleHeader",
      activityLabel: "activityLabel",
      notActive: "notActive",
      moderateActive: "moderateActive",
      highlyActive: "highlyActive",
      sleepLabel: "sleepLabel",
      lessSleep: "lessSleep",
      moreSleep: "moreSleep",
      waterLabel: "waterLabel",
      exerciseLabel: "exerciseLabel",
      daily: "daily",
      fewTimesWeek: "fewTimesWeek",
      rarely: "rarely",
      never: "never",
      dietHeader: "dietHeader",
      dietExperienceLabel: "dietExperienceLabel",
      emotionalEatingHeader: "emotionalEatingHeader",
      emotionHeader: "emotionHeader",
      yesHeader: "yesHeader",
      noHeader: "noHeader",
      happyLabel: "happyLabel",
      sadLabel: "sadLabel",
      excitedLabel: "excitedLabel",
      angryLabel: "angryLabel",
      anxiousLabel: "anxiousLabel",
      boredLabel: "boredLabel",
      additionalInfoHeader: "additionalInfoHeader",
      additionalNotesLabel: "additionalNotesLabel",
      submitBtn: "submit"
    };
    // Function to convert Arabic numerals to English numerals
    function convertArabicToEnglish(input) {
      const arabicNumerals = ['Ù ', 'Ù¡', 'Ù¢', 'Ù£', 'Ù¤', 'Ù¥', 'Ù¦', 'Ù§', 'Ù¨', 'Ù©'];
      let englishEquivalent = input;

      // Replace Arabic numerals with English numerals
      arabicNumerals.forEach((arabicDigit, index) => {
        const regex = new RegExp(arabicDigit, 'g');
        englishEquivalent = englishEquivalent.replace(regex, index);
      });

      return englishEquivalent;
    }

    // Function to handle validation for number inputs (up to 3 digits)
    function handleNumberInput(inputId, errorId) {
      const inputElement = document.getElementById(inputId);
      const errorElement = document.getElementById(errorId);

      inputElement.addEventListener('input', function(event) {
        let inputValue = event.target.value;

        // Convert Arabic numerals to English numerals
        inputValue = convertArabicToEnglish(inputValue);

        // Validate the input: allow only digits and up to 3 characters
        if (/^\d{0,3}$/.test(inputValue)) {
          // Valid input (only digits, and no more than 3)
          event.target.setCustomValidity('');
          errorElement.style.display = 'none';
        } else {
          // Invalid input (more than 3 digits or contains non-digit characters)
          event.target.setCustomValidity('Please enter a valid number (up to 3 digits)');
          errorElement.style.display = 'block';
        }

        // Update the visible input with the converted (English) value
        event.target.value = inputValue;
      });
    }

    // Apply validation to all the inputs that need number validation
    handleNumberInput('age', 'error1');
    handleNumberInput('weight', 'error2');
    handleNumberInput('height', 'error3');

    // General function for validating phone input
    function validateNumericInput(inputElement, hiddenElement, errorElement) {
      let inputValue = inputElement.value;

      // Convert Arabic numerals to English numerals
      inputValue = convertArabicToEnglish(inputValue);

      // Check if input contains only digits
      if (/^\d*$/.test(inputValue)) {
        // Valid input (only digits)
        inputElement.setCustomValidity('');
        hiddenElement.value = inputValue; // Update the hidden input
        errorElement.style.display = 'none'; // Hide error message
      } else {
        // Invalid input (contains non-digit characters)
        inputElement.setCustomValidity('Please enter a valid number');
        errorElement.style.display = 'block'; // Show error message
      }

      // Update the visible input with the converted (English) value
      inputElement.value = inputValue;
    }

    // Handle phone input validation
    document.getElementById('phone').addEventListener('input', function(event) {
      validateNumericInput(event.target, document.getElementById('fullPhone'), document.getElementById('error'));
    });

    // Loop through elements and update text content
    for (const [id, translationKey] of Object.entries(elements)) {
      const el = document.getElementById(id);
      if (el) {
        el.textContent = translations[lang]?.[translationKey] || el.textContent;
      }
    }

    // Update placeholder text safely
    const placeholders = {
      phone: "phonePlaceholder",
      diet_experience: "dietExperiencePlaceholder",
      additional_notes: "additionalNotesPlaceholder",
      medicalOtherInput: "medicalOtherPlaceholder"
    };

    for (const [id, key] of Object.entries(placeholders)) {
          const el = document.getElementById(id);
          if (el && translations[lang][key]) {
            el.placeholder = translations[lang][key];
          }
        }
    // Translating checkboxes and radio buttons
    const checkboxTranslations = {
          loseWeight: "loseWeight",
          gainWeight: "gainWeight",
          healthyLifestyle: "healthyLifestyle",
          medicalCondition: "medicalCondition",
          diabetes: "diabetes",
          hypertension: "hypertension",
          dyslipidemia: "dyslipidemia",
          heartDisease: "heartDisease",
          noneLabel: "noneLabel",
          notActive: "notActive",
          moderateActive: "moderateActive",
          highlyActive: "highlyActive",
          lessSleep: "lessSleep",
          moreSleep: "moreSleep",
          daily: "daily",
          fewTimesWeek: "fewTimesWeek",
          rarely: "rarely",
          never: "never",
          maleLabel: "maleLabel",
          femaleLabel: "femaleLabel",
          zeroPointFiveL: "zeroPointFiveL",
          oneL: "oneL",
          onePointFiveL: "onePointFiveL",
          twoL: "twoL",
          twoPointFiveL: "twoPointFiveL",
          threeL: "threeL",
          moreThanThreeL: "moreThanThreeL"

        };

    // Update labels for checkboxes and radio buttons
    for (const [id, key] of Object.entries(checkboxTranslations)) {
          const inputElement = document.getElementById(id);
          if (inputElement) {
            // Find the closest label (either wrapping the input or using 'for' attribute)
            const label = inputElement.closest('label') || document.querySelector(`label[for="${id}"]`);
            if (label) {
              // Keep the input in place and update only the label text
              const labelText = translations[lang]?.[key] || label.textContent;
              const inputNode = label.querySelector('input');
              if (inputNode) {
                label.innerHTML = ''; // Clear label
                label.appendChild(inputNode); // Re-add input element
                label.append(` ${labelText}`); // Add translated label text
              }
            }
          }
        }


        const medicalOtherLabel = document.getElementById("medicalOtherLabel");
          if (medicalOtherLabel) {
            const translatedText = translations[lang]["medicalOther"];
            if (translatedText) {
              medicalOtherLabel.textContent = translatedText;
            }
          }


        const medicationsLabel = document.querySelector("label[for='medications']");
        if (medicationsLabel) medicationsLabel.childNodes[0].nodeValue = translations[lang]["medicationsLabel"] + ": ";

    // Adjust text direction based on language
    document.body.style.direction = lang === "ar" ? "rtl" : "ltr";
    document.body.style.textAlign = lang === "ar" ? "right" : "left";
  } catch (error) {
        console.error("Error loading translations:", error);
      }
    }
    
    // Event listener to trigger language change
    document.getElementById('languageSelector').addEventListener('change', function () {
      const selectedLanguage = this.value;
      loadLanguage(selectedLanguage);
    });
    
    // Load the default language (English) on page load
    document.addEventListener("DOMContentLoaded", function() {
      loadLanguage('en');
    });

// Initialize phone input
const phoneInput = document.querySelector("#phone");
const fullPhoneInput = document.querySelector("#fullPhone");

const iti = intlTelInput(phoneInput, {
  initialCountry: "auto",
  geoIpLookup: function (callback) {
    callback("LB"); // Default to the US instead of fetching
  },
  utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
});

document.querySelector("#nutritionistForm").addEventListener("submit", function (event) {
    event.preventDefault(); // Prevent default form submission

    console.log("ðŸš€ Form submission started...");  // âœ… Debugging step

    // Ensure language selection is working
    const lang = document.getElementById("languageSelector").value;
    console.log("ðŸŒ Selected Language:", lang); 

    // Ensure phone input works
    fullPhoneInput.value = iti.getNumber();
    if (!fullPhoneInput.value.startsWith("+")) {
        fullPhoneInput.value = "+" + iti.getSelectedCountryData().dialCode + phoneInput.value.trim();
    }
    console.log("ðŸ“ž Phone Number Processed:", fullPhoneInput.value);

    // Collect form data
    const formData = new FormData(this);
    const formObject = {};
    formData.forEach((value, key) => {
        formObject[key] = value;
    });

    console.log("âœ… Form Data Collected:", formObject);

    // Check if values are valid
    if (!formObject.name || !formObject.phone) {
        console.log("âŒ ERROR: Name or Phone is missing!");
        alert("Please fill in all required fields.");
        return;
    }


    // Collect checkboxes
    const goals = Array.from(document.querySelectorAll("input[name='goal[]']:checked")).map(cb => cb.value);
    let medicalConditions = Array.from(document.querySelectorAll("input[name='medical[]']:checked")).map(cb => cb.value);

    // Check if "Other" is selected and append the additional input
    const medicalOtherInput = document.getElementById("medicalOtherInput");
    if (medicalOtherInput.value.trim() !== "") {
        medicalConditions.push(`Other: ${medicalOtherInput.value.trim()}`);
    }
    let medications = formObject.medications?.trim() || "Not provided";
    if (document.querySelector("#noneLabel").checked) medications = "None";
    // Collect Emotional Eating Responses
    const emotionsList = ["happy", "sad", "excited", "angry", "anxious", "bored"];
    const emotions = emotionsList.map(emotion => {
        return `${lang === "ar" ? getArabicEmotion(emotion) : capitalizeFirstLetter(emotion)}: ${
            document.querySelector(`input[name='${emotion}']:checked`)?.value || "Not answered"
        }`;
    });
    // Define a function to get the selected dropdown text instead of the value
    function getSelectedText(selectId) {
        const select = document.getElementById(selectId);
        return select.options[select.selectedIndex].text; // Get the visible text
    }

    const additionalNotes = formObject.additional_notes?.trim() || "Not provided";
    // Construct WhatsApp message
    const whatsappNumber = "96181826856"; // Your WhatsApp number
    const message = `
ðŸ‘¤ *${lang === "ar" ? "Ø§Ù„Ø§Ø³Ù…" : "Name"}:* ${formObject.name}
ðŸ“ž *${lang === "ar" ? "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" : "Phone"}:* ${formObject.fullPhone || formObject.phone}
ðŸŽ‚ *${lang === "ar" ? "Ø§Ù„Ø¹Ù…Ø±" : "Age"}:* ${formObject.age}
âš–ï¸ *${lang === "ar" ? "Ø§Ù„ÙˆØ²Ù†" : "Weight"}:* ${formObject.weight} kg
ðŸ“ *${lang === "ar" ? "Ø§Ù„Ø·ÙˆÙ„" : "Height"}:* ${formObject.height} cm
âš§ *${lang === "ar" ? "Ø§Ù„Ø¬Ù†Ø³" : "Gender"}:* ${formObject.sex}

ðŸŽ¯ *${lang === "ar" ? "Ø§Ù„Ø£Ù‡Ø¯Ø§Ù" : "Goals"}:* ${goals.join(", ") || (lang === "ar" ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù Ù…Ø­Ø¯Ø¯Ø©" : "No specific goals selected")}

ðŸ©º *${lang === "ar" ? "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©" : "Medical Info"}:* ${medicalConditions.join(", ") || (lang === "ar" ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø·Ø¨ÙŠØ©" : "No medical conditions reported")}

ðŸ’Š *${lang === "ar" ? "Ø§Ù„Ø£Ø¯ÙˆÙŠØ©" : "Medications"}:* ${medications}

ðŸƒ *${lang === "ar" ? "Ù†Ù…Ø· Ø§Ù„Ø­ÙŠØ§Ø©" : "Lifestyle Details"}:*
ðŸ”¥ *${lang === "ar" ? "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·" : "Activity Scale"}:* ${formObject.activity}
ðŸ’¤ *${lang === "ar" ? "Ø§Ù„Ù†ÙˆÙ…" : "Sleep"}:* ${formObject.sleep}
ðŸ’§ *${lang === "ar" ? "ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø§Ø¡" : "Water Intake"}:* ${formObject.water} per day
ðŸ‹ï¸ *${lang === "ar" ? "Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø©" : "Exercise Frequency"}:* ${formObject.exercise}

ðŸ¥— *${lang === "ar" ? "ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø­Ù…ÙŠØ© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©" : "Diet Experience"}:* ${formObject.diet_experience || "Not provided"}

ðŸ˜‹ *${lang === "ar" ? "Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ" : "Emotional Eating"}:* 
${emotions.join("\n")}

ðŸ“ *${lang === "ar" ? "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©" : "Additional Information"}:* 
${additionalNotes}


ðŸ“… *${lang === "ar" ? "ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØºØ°ÙŠØ©" : "Submitted via Healthy Haven Patient Form"}*`;

    console.log("ðŸ“© WhatsApp Message Created:", message);

    // Redirect to WhatsApp
    const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
    console.log("ðŸ”— Redirecting to:", whatsappUrl);

    // Ensure Redirection Happens
    setTimeout(() => {
        window.location.href = whatsappUrl;
    }, 500); // Redirect after 500ms delay

    console.log("âœ… Redirect Triggered.");
});

/**
 * Helper function to capitalize first letter
 */
function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

/**
 * Converts emotion names to Arabic if needed.
 */
function getArabicEmotion(emotion) {
    const arabicEmotions = {
        happy: "Ø³Ø¹ÙŠØ¯",
        sad: "Ø­Ø²ÙŠÙ†",
        excited: "Ù…ØªØ­Ù…Ø³",
        angry: "ØºØ§Ø¶Ø¨",
        anxious: "Ù‚Ù„Ù‚",
        bored: "Ø¶Ø¬Ø±"
    };
    return arabicEmotions[emotion] || emotion;
}


</script>

</body>  
</html>

